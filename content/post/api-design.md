---
title: "REST API設計の際に気にするべきこと"
date: 2019-09-15T16:42:03+09:00
draft: true
comments: true
toc: true
categories: []
tags: ["REST", "API"]
---

<!--more-->

---

{{< ad/ >}}

---

### URIは名詞

URIはリソースを表す名詞。URIが指すリソースに大して、各種メソッド(動詞)の操作を行う。

簡潔で、かつ何のリソースを指すURIなのかわかりやすい名前にする。

|メソッド|CRUD|説明|
|:--|:-:|:-:|
|POST|CREATE||
|PUT|UPDATE||
|GET|READ||
|DELETE|DELETE||
|HEAD|||
|OPTIONS|||

### URIの階層は親子関係

URIを階層構造にする際は、「コレクション」と「特定の要素」のような親子関係が基本。

一番基本形は`/コレクション/名詞`。

バージョンやドメイン名、その他説明等が入ることもある。

ただし、階層はなるべく浅く保ち、複雑になる部分はクエリパラメータ等で指定させる。

### POSTの対象になるURIは複数形

POSTは、複数個存在するリソースを対象として、新たな一つを新規作成する。特定の一つを指定してPOSTを行うことはしない。

なので、原則POSTの対象になるURIは名詞の複数形になる。

### URIに含むIDの扱い

連番の数字などは予測されやすいため、予測されても問題ないものでなければ、UUID等のランダム文字列にするとよい。

また、あとで変更できなくなるため、IDを意味のある文字列にしない。

### バージョニング

階層の最上位や上の方にバージョンを入れておくことが多い。

内部処理の変更程度ならバージョンは上げない。振る舞いが保てないほどの変更を入れri場合にバージョンを上げる。

### 認証/認可

認可プロトコルはOAuth2を利用する。

認証プロトコルはOpenIDが有名。

### おわり

以上はあくまで基本方針であり、原理主義的にならないようにする。あくまで使い手が使いやすいよう心がける。

---

{{< ad/ >}}

---
